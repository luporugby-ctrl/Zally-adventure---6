<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gemini Visual Lab: S.L.I.C.E. Method</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Press+Start+2P&display=swap');
        
        body {
            background-color: #121212;
            font-family: 'Roboto Mono', monospace;
            color: white;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            touch-action: none;
        }
        
        #game-wrapper {
            position: relative;
            height: 90vh; 
            aspect-ratio: 3/4;
            max-width: 100%;
            display: flex;
            justify-content: center;
            box-shadow: 0 0 30px rgba(255, 105, 0, 0.2);
            border: 2px solid #333;
            background: #000;
        }

        canvas {
            display: block;
            height: 100%;
            width: auto;
            image-rendering: pixelated;
        }

        /* UI OVERLAYS */
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.96);
            z-index: 50;
            padding: 20px;
            text-align: center;
        }

        .hidden { display: none !important; }

        .btn {
            background: linear-gradient(135deg, #FF6900 0%, #cf5500 100%);
            border: 1px solid #fff;
            color: white;
            padding: 15px 30px;
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            cursor: pointer;
            margin: 10px;
            text-transform: uppercase;
            box-shadow: 0 4px 0 #8a3800;
            transition: transform 0.1s;
        }
        .btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 #8a3800;
        }

        .info-box {
            background: #1e1e1e;
            border-left: 4px solid #FF6900;
            padding: 20px;
            margin-bottom: 20px;
            text-align: left;
            max-width: 90%;
            font-size: 12px;
            line-height: 1.6;
            max-height: 60vh;
            overflow-y: auto;
        }

        .highlight { color: #FF6900; font-weight: bold; }
        
        /* HUD */
        .hud {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            pointer-events: none;
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            z-index: 20;
            text-shadow: 1px 1px 0 #000;
        }

        /* MOBILE CONTROLS */
        .mobile-controls {
            display: none;
            position: absolute;
            bottom: 20px;
            width: 100%;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 100;
            pointer-events: auto;
        }
        @media (hover: none) and (pointer: coarse) { .mobile-controls { display: flex; } }
        
        .d-pad { display: grid; grid-template-columns: 50px 50px 50px; gap: 5px; }
        .ctrl-btn {
            width: 50px; height: 50px;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255,255,255,0.5);
            border-radius: 12px;
            display: flex; justify-content center; align-items: center;
            font-size: 20px;
            user-select: none;
        }
        .ctrl-btn:active { background: rgba(255, 105, 0, 0.5); }

    </style>
</head>
<body>

    <div class="text-center mb-1">
        <h1 class="text-xl font-bold text-orange-500 tracking-widest font-mono">GEMINI VISUAL LAB</h1>
        <p class="text-[10px] text-gray-400">MASTER THE S.L.I.C.E. METHOD</p>
    </div>

    <div id="game-wrapper">
        <canvas id="gameCanvas" width="600" height="800"></canvas>
        
        <!-- HUD -->
        <div class="hud">
            <div id="level-display" class="text-yellow-400">TRAINING</div>
            <div>STATUS: <span id="status-text" class="text-cyan-400">ACTIVE</span></div>
        </div>

        <!-- START SCREEN -->
        <div id="start-screen" class="overlay">
            <!-- ZALLY ADDED HERE -->
            <img src="zally_chef.png" alt="Zally" style="width: 80px; height: 80px; image-rendering: pixelated; margin-bottom: 15px;">
            
            <h1 class="text-2xl text-orange-500 mb-4 font-bold font-mono">PROMPT ACADEMY</h1>
            
            <div class="info-box">
                <h3 class="text-white font-bold mb-2">LEARN TO PROMPT LIKE A PRO</h3>
                <p class="text-gray-300 mb-4">Nano Banana Pro gives you studio-quality control. To master it, remember the <strong>S.L.I.C.E.</strong> acronym:</p>
                <ul class="space-y-2 pl-2 text-gray-300 text-xs">
                    <li><strong class="text-blue-400">S</strong>UBJECT (The Hero)</li>
                    <li><strong class="text-green-400">L</strong>OCATION (The Context)</li>
                    <li><strong class="text-yellow-400">I</strong>LLUMINATION (Lighting)</li>
                    <li><strong class="text-purple-400">C</strong>AMERA (Style/Angle)</li>
                    <li><strong class="text-red-400">E</strong>XTRAS (Details)</li>
                </ul>
            </div>
            
            <button class="btn" onclick="startGame()">START COURSE</button>
        </div>

        <!-- LEVEL INTRO -->
        <div id="level-intro" class="overlay hidden">
            <h1 class="text-xl text-yellow-400 mb-4 font-mono" id="intro-title">MODULE 1</h1>
            <div class="info-box" id="intro-text"></div>
            <button class="btn" onclick="startLevel()">START</button>
        </div>

        <!-- VICTORY -->
        <div id="victory-screen" class="overlay hidden">
            <h1 class="text-green-400 text-xl mb-4 font-mono">GENERATION COMPLETE</h1>
            <div class="info-box">
                <p class="text-gray-400 text-[10px] mb-2 uppercase tracking-wide">Output Prompt:</p>
                <p class="text-white italic text-xs bg-gray-800 p-3 border-l-2 border-orange-500 mb-4" id="final-prompt">...</p>
                <p class="text-[10px] text-orange-400 font-bold" id="feature-highlight"></p>
            </div>
            <button class="btn" onclick="nextLevelAction()">NEXT MODULE</button>
        </div>

        <!-- FINAL RESUME SCREEN -->
        <div id="final-screen" class="overlay hidden">
            <h1 class="text-yellow-400 text-2xl mb-4 font-mono">COURSE COMPLETED!</h1>
            <div class="info-box" style="text-align: center;">
                <p class="text-white mb-4">You have successfully mastered the <strong>S.L.I.C.E.</strong> method and explored Nano Banana Pro capabilities.</p>
                
                <div class="bg-gray-800 p-4 rounded-lg mb-4 text-left text-xs">
                    <p>‚úÖ <strong>Structure:</strong> Subject + Context + Style</p>
                    <p>‚úÖ <strong>Control:</strong> Infographics & Dioramas</p>
                    <p>‚úÖ <strong>Text:</strong> Precise Rendering</p>
                    <p>‚úÖ <strong>Knowledge:</strong> Cultural Accuracy</p>
                </div>

                <!-- THE PUN -->
                <p class="text-orange-500 font-bold text-lg animate-pulse mt-6">"Don't let your ideas slip!<br>Keep your prompts a-peel-ing<br>with Nano Banana!!" üçå</p>
            </div>
            <button class="btn" onclick="location.reload()">RESTART LAB</button>
        </div>

        <!-- MOBILE CONTROLS -->
        <div class="mobile-controls">
            <div class="d-pad">
                <div></div>
                <div class="ctrl-btn" ontouchstart="simKey('ArrowUp', true)" ontouchend="simKey('ArrowUp', false)">‚¨ÜÔ∏è</div>
                <div></div>
                <div class="ctrl-btn" ontouchstart="simKey('ArrowLeft', true)" ontouchend="simKey('ArrowLeft', false)">‚¨ÖÔ∏è</div>
                <div class="ctrl-btn" ontouchstart="simKey('ArrowDown', true)" ontouchend="simKey('ArrowDown', false)">‚¨áÔ∏è</div>
                <div class="ctrl-btn" ontouchstart="simKey('ArrowRight', true)" ontouchend="simKey('ArrowRight', false)">‚û°Ô∏è</div>
            </div>
            <div class="ctrl-btn" style="width:70px;height:70px;background:rgba(0,255,255,0.2);border-radius:50%" ontouchstart="simKey('Space', true)" ontouchend="simKey('Space', false)">üñåÔ∏è</div>
        </div>
    </div>

<script>
/**
 * GEMINI VISUAL LAB v9.2 - Zally added to start screen
 */

const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// --- ASSETS ---
const zallyImg = new Image();
zallyImg.src = 'zally_chef.png'; 

// --- CONSTANTS ---
const FLOORS = [150, 300, 450, 600]; 
const LADDERS_X = [50, 200, 350, 500]; 

// --- STATE ---
let gameState = 'MENU'; 
let level = 1;
let score = 0;
let animId;

// --- INPUT ---
const keys = { ArrowUp:false, ArrowDown:false, ArrowLeft:false, ArrowRight:false, Space:false };

// --- ENTITIES ---
const player = {
    x: 300, y: 570, w: 30, h: 30,
    vx: 0, vy: 0, speed: 4,
    onLadder: false,
    facingRight: true,
    
    update: function() {
        this.vx = 0;
        this.vy = 0;
        
        let nearLadder = false;
        let ladderX = 0;
        const activeLadders = [
            {x: 50, y1: 150, y2: 300},  
            {x: 500, y1: 150, y2: 300}, 
            {x: 200, y1: 300, y2: 450}, 
            {x: 350, y1: 450, y2: 600}  
        ];

        let centerX = this.x + this.w/2;
        let bottomY = this.y + this.h;

        for (let l of activeLadders) {
            if (Math.abs(centerX - (l.x + 15)) < 25) {
                if (bottomY >= l.y1 - 5 && bottomY <= l.y2 + 5) {
                    nearLadder = true;
                    ladderX = l.x;
                }
            }
        }
        
        if (keys.ArrowLeft) { this.vx = -this.speed; this.facingRight = false; }
        if (keys.ArrowRight) { this.vx = this.speed; this.facingRight = true; }
        
        if (nearLadder) {
            if (keys.ArrowUp) { 
                this.vy = -this.speed; 
                this.x = lerp(this.x, ladderX, 0.2); 
                this.onLadder = true;
            }
            else if (keys.ArrowDown) { 
                this.vy = this.speed; 
                this.x = lerp(this.x, ladderX, 0.2);
                this.onLadder = true;
            } else {
                this.onLadder = false;
            }
        } else {
            this.onLadder = false;
        }

        if (!this.onLadder) {
            let onGround = false;
            for (let fy of FLOORS) {
                if (Math.abs(bottomY - fy) < 15) {
                    this.y = fy - this.h;
                    onGround = true;
                    break;
                }
            }
            if (!onGround) this.vy += 5; 
        }

        this.x += this.vx;
        this.y += this.vy;

        if (this.x < 0) this.x = 0;
        if (this.x > 570) this.x = 570;
        if (this.y > 770) this.y = 770; 
    },

    draw: function() {
        ctx.save();
        ctx.translate(this.x + 15, this.y + 15);
        if (!this.facingRight) ctx.scale(-1, 1);
        
        if (zallyImg.complete && zallyImg.naturalWidth > 0) {
            ctx.drawImage(zallyImg, -20, -20, 40, 40);
        } else {
            ctx.fillStyle = '#FF6900';
            ctx.beginPath(); ctx.arc(0,0,15,0,Math.PI*2); ctx.fill();
            ctx.fillStyle = '#fff'; ctx.fillRect(-10,-20,20,10); 
        }
        ctx.restore();
    }
};

let layers = [];
let enemies = [];

// --- GENERATORS ---

function createLevel(lvl) {
    layers = [];
    enemies = [];
    player.x = 300; player.y = 570; 
    
    // LEVEL 1: S.L.I.C.E. METHOD (The Basics - Rustic/Cozy Style)
    if (lvl === 1) {
        document.getElementById('level-display').innerText = "LESSON 1: S.L.I.C.E.";
        layers.push({x: 50, y: 600-15, w: 100, type: 'SUBJECT', color: '#3B82F6', collected: false, letter:'S'});
        layers.push({x: 450, y: 450-15, w: 100, type: 'LOCATION', color: '#10B981', collected: false, letter:'L'});
        layers.push({x: 200, y: 300-15, w: 120, type: 'ILLUMINATION', color: '#FBBF24', collected: false, letter:'I'});
        layers.push({x: 50, y: 150-15, w: 100, type: 'CAMERA', color: '#8B5CF6', collected: false, letter:'C'});
        layers.push({x: 450, y: 150-15, w: 100, type: 'EXTRAS', color: '#EF4444', collected: false, letter:'E'});
    } 
    // LEVEL 2: CREATIVE CONTROL (Fashion History Infographic)
    else if (lvl === 2) {
        document.getElementById('level-display').innerText = "LESSON 2: CREATIVE CTRL";
        layers.push({x: 50, y: 450-15, w: 130, type: 'SINGLE INFO', color: '#8B5CF6', collected: false});
        layers.push({x: 450, y: 600-15, w: 120, type: 'DIORAMAS', color: '#EC4899', collected: false});
        layers.push({x: 250, y: 150-15, w: 150, type: 'ILLUSTRATION', color: '#EF4444', collected: false});
        
        enemies.push({x: 50, y: 300-20, type: 'GENERIC', speed: 1.5, stunned: 0});
    }
    // LEVEL 3: TEXT RENDERING (Custom Name Label)
    else if (lvl === 3) {
        document.getElementById('level-display').innerText = "LESSON 3: TEXT";
        layers.push({x: 100, y: 150-15, w: 120, type: 'BOTTLE', color: '#F59E0B', collected: false});
        layers.push({x: 400, y: 300-15, w: 120, type: 'WRAP LBL', color: '#10B981', collected: false});
        layers.push({x: 50, y: 450-15, w: 130, type: '[YOUR NAME]', color: '#EF4444', collected: false});

        enemies.push({x: 300, y: 450-20, type: 'TYPO', speed: 2, stunned: 0});
    }
    // LEVEL 4: WORLD KNOWLEDGE (Italian Food)
    else if (lvl === 4) {
        document.getElementById('level-display').innerText = "LESSON 4: KNOWLEDGE";
        layers.push({x: 50, y: 600-15, w: 100, type: 'FLAT LAY', color: '#3B82F6', collected: false});
        layers.push({x: 450, y: 450-15, w: 120, type: '8 DISHES', color: '#10B981', collected: false});
        layers.push({x: 200, y: 300-15, w: 130, type: 'ANNOTATIONS', color: '#FBBF24', collected: false});
        layers.push({x: 50, y: 150-15, w: 120, type: 'ITALIAN', color: '#8B5CF6', collected: false});
        
        enemies.push({x: 500, y: 150-20, type: 'ERROR', speed: 2.2, stunned: 0});
    }
    // LEVEL 5: ITERATION (Refine the Italian Food Image)
    else if (lvl === 5) {
        document.getElementById('level-display').innerText = "LESSON 5: ITERATION";
        layers.push({x: 100, y: 150-15, w: 120, type: 'TRANSLATE', color: '#3B82F6', collected: false});
        layers.push({x: 400, y: 300-15, w: 120, type: 'PHONETIC', color: '#10B981', collected: false});
        layers.push({x: 50, y: 450-15, w: 100, type: 'ENGLISH', color: '#FBBF24', collected: false});
        layers.push({x: 450, y: 600-15, w: 120, type: 'DETAILS', color: '#EF4444', collected: false});
        
        enemies.push({x: 300, y: 300-20, type: 'FORGET', speed: 2.5, stunned: 0});
    }
}

// --- CORE LOOPS ---

function update() {
    player.update();
    
    let allCollected = true;
    for (let l of layers) {
        if (l.collected) continue;
        allCollected = false;

        if (player.x < l.x + l.w &&
            player.x + player.w > l.x &&
            player.y < l.y + 15 &&
            player.y + player.h > l.y) {
            
            l.collected = true;
            score += 100;
        }
    }
    
    if (allCollected) {
        gameState = 'VICTORY';
        showVictory();
        return;
    }

    for (let e of enemies) {
        if (e.stunned > 0) { e.stunned--; continue; }
        if (e.x < player.x) e.x += e.speed; else e.x -= e.speed;
        
        if (Math.abs(e.x - player.x) < 20 && Math.abs(e.y - player.y) < 20) {
            if (player.x > e.x) player.x += 50; else player.x -= 50;
        }
    }
    
    if (keys.Space) {
        for(let e of enemies) e.stunned = 120;
    }
}

function draw() {
    // BG
    ctx.fillStyle = '#111';
    ctx.fillRect(0, 0, 600, 800);
    
    // Floors
    ctx.strokeStyle = '#444';
    ctx.lineWidth = 4;
    ctx.beginPath();
    for(let y of FLOORS) {
        ctx.moveTo(0, y); ctx.lineTo(600, y);
    }
    ctx.stroke();
    
    // Ladders
    ctx.fillStyle = '#333';
    const drawLad = (x, y1, y2) => {
        for(let y=y1; y<y2; y+=15) ctx.fillRect(x, y, 30, 4);
        ctx.strokeStyle='#555'; ctx.strokeRect(x,y1,30, y2-y1);
    };
    drawLad(50, 150, 300);
    drawLad(500, 150, 300);
    drawLad(200, 300, 450);
    drawLad(350, 450, 600);
    
    // Layers
    for (let l of layers) {
        if (l.collected) continue;
        ctx.fillStyle = l.color;
        ctx.fillRect(l.x, l.y, l.w, 15);
        ctx.fillStyle = '#fff';
        ctx.font = '10px monospace';
        ctx.fillText(l.type, l.x + 5, l.y - 5);
        
        if(l.letter) {
             ctx.fillStyle = 'rgba(255,255,255,0.2)';
             ctx.font = '20px monospace';
             ctx.fillText(l.letter, l.x + l.w - 20, l.y - 5);
        }
    }
    
    // Enemies
    for (let e of enemies) {
        ctx.save();
        ctx.translate(e.x, e.y);
        ctx.fillStyle = e.stunned ? '#00f' : '#f0f';
        ctx.globalAlpha = 0.8;
        ctx.beginPath(); ctx.arc(15,15,15,0,Math.PI*2); ctx.fill();
        ctx.fillStyle = '#fff'; ctx.font = '10px monospace';
        ctx.fillText(e.type, 0, -5);
        ctx.restore();
    }
    
    player.draw();
    
    // Status Bar
    ctx.fillStyle = '#222';
    ctx.fillRect(0, 750, 600, 50);
    ctx.fillStyle = '#fff';
    ctx.font = '10px "Roboto Mono"';
    
    if (level === 1) {
        let txt = "S.L.I.C.E: ";
        const letters = ['S', 'L', 'I', 'C', 'E'];
        let collectedLetters = layers.filter(l=>l.collected).map(l=>l.letter);
        
        txt += letters.map(char => collectedLetters.includes(char) ? char : "_").join(" ");
        ctx.fillText(txt, 10, 780);
    } else {
        ctx.fillText("COLLECTED: " + layers.filter(l=>l.collected).map(l=>l.type).join(" + "), 10, 780);
    }
}

function loop() {
    if (gameState === 'PLAYING') {
        update();
        draw();
        animId = requestAnimationFrame(loop);
    }
}

// --- GAME FLOW ---

function startGame() {
    document.getElementById('start-screen').classList.add('hidden');
    level = 1;
    showIntro();
}

function showIntro() {
    gameState = 'INTRO';
    const title = document.getElementById('intro-title');
    const text = document.getElementById('intro-text');
    
    if (level === 1) {
        title.innerText = "LESSON 1: THE BASICS";
        text.innerHTML = `
            <p class="highlight mb-2">METHOD: S.L.I.C.E.</p>
            <p class="text-gray-300">Collect the 5 key ingredients for any prompt:</p>
            <ul class="text-xs text-white list-none mt-2 space-y-1">
               <li>[S]ubject</li>
               <li>[L]ocation</li>
               <li>[I]llumination</li>
               <li>[C]amera</li>
               <li>[E]xtras</li>
            </ul>
        `;
    } else if (level === 2) {
        title.innerText = "LESSON 2: CREATIVE CONTROL";
        text.innerHTML = `
            <p class="highlight mb-2">GOAL: FASHION HISTORY INFOGRAPHIC</p>
            <p class="text-gray-300">Nano Banana Pro allows precise style control.</p>
            <p class="text-white mt-4"><strong>Task:</strong> Create a single, sleek infographic.</p>
            <p class="text-xs text-gray-400 mt-2">COLLECT: 'SINGLE INFO' + 'DIORAMAS' + 'ILLUSTRATION'</p>
        `;
    } else if (level === 3) {
        title.innerText = "LESSON 3: TEXT RENDERING";
        text.innerHTML = `
            <p class="highlight mb-2">GOAL: HOT SAUCE LABEL</p>
            <p class="text-gray-300">Generate legible, specific text on objects.</p>
            <p class="text-white mt-4"><strong>Task:</strong> Create a bottle mockup with "[Your Name]'s Sauce".</p>
            <p class="text-xs text-gray-400 mt-2">COLLECT: 'BOTTLE' + 'WRAP LBL' + '[YOUR NAME]'</p>
        `;
    } else if (level === 4) {
        title.innerText = "LESSON 4: WORLD KNOWLEDGE";
        text.innerHTML = `
            <p class="highlight mb-2">GOAL: ITALIAN FEAST</p>
            <p class="text-gray-300">Connect to Google Search for cultural accuracy.</p>
            <p class="text-white mt-4"><strong>Task:</strong> 8 Traditional Italian Dishes.</p>
            <p class="text-xs text-gray-400 mt-2">COLLECT: 'DISHES' + 'ANNOTATIONS' + 'ITALIAN'</p>
        `;
    } else if (level === 5) {
        title.innerText = "LESSON 5: ITERATION";
        text.innerHTML = `
            <p class="highlight mb-2">GOAL: REFINE & TRANSLATE</p>
            <p class="text-gray-300">Gemini isn't just a creator, it's a collaborator.</p>
            <p class="text-white mt-4"><strong>Task:</strong> Add phonetic descriptions to the Italian dishes.</p>
            <p class="text-xs text-gray-400 mt-2">COLLECT: 'TRANSLATE' + 'PHONETIC' + 'DETAILS'</p>
        `;
    }
    
    document.getElementById('level-intro').classList.remove('hidden');
}

function startLevel() {
    document.getElementById('level-intro').classList.add('hidden');
    createLevel(level);
    gameState = 'PLAYING';
    loop();
}

function showVictory() {
    cancelAnimationFrame(animId);
    const promptBox = document.getElementById('final-prompt');
    const featBox = document.getElementById('feature-highlight');
    
    if (level === 1) {
        promptBox.innerText = "\"A cute mascot chef (S) in a rustic kitchen (L) with warm morning light (I), close-up macro shot 4k (C), holding a fresh tomato (E).\"";
        featBox.innerText = "‚úì S.L.I.C.E. Method Verified";
    }
    else if (level === 2) {
        promptBox.innerText = "\"Create a SINGLE sleek, modern, editorial infographic about fashion history, with small 3D dioramas representing different fashion eras. Each diorama features a mannequin in a specific outfit (e.g., Roaring 20s, 80s Power Suit, Streetwear). Clean layout, neutral background. High-end illustration style.\"";
        featBox.innerText = "‚úì Style Control ‚úì Single Layout";
    }
    else if (level === 3) {
        promptBox.innerText = "\"Create a minimal label wrapped around a bottle. Add the logo '[Your Name]'s Sauce' to the label, do not add any extra text.\"";
        featBox.innerText = "‚úì Text Rendering ‚úì Object Wrapping";
    }
    else if (level === 4) {
        promptBox.innerText = "\"Create a table with 8 traditional Italian dishes. Annotate the image with the name of each dish in Italian.\"";
        featBox.innerText = "‚úì World Knowledge ‚úì Cultural Accuracy";
    }
    else {
        promptBox.innerText = "\"Translate the dish names to English and add a phonetic description for every dish name, maintain all the details.\"";
        featBox.innerText = "‚úì Iteration ‚úì Multimodal Follow-up";
    }
    
    document.getElementById('victory-screen').classList.remove('hidden');
}

function nextLevelAction() {
    document.getElementById('victory-screen').classList.add('hidden');
    level++;
    if (level > 5) {
        // Show Final Screen
        document.getElementById('final-screen').classList.remove('hidden');
    } else {
        showIntro();
    }
}

// --- UTILS ---
function lerp(start, end, amt) { return (1-amt)*start + amt*end; }
function simKey(k, s) { keys[k] = s; if(s && k==='Space') { for(let e of enemies) e.stunned = 120; } }

window.addEventListener('keydown', e => { if(keys.hasOwnProperty(e.code)) keys[e.code] = true; });
window.addEventListener('keyup', e => { if(keys.hasOwnProperty(e.code)) keys[e.code] = false; });

</script>
</body>
</html>
